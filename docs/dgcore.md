
# `directedgraph.dgcore` Module

## Table of Contents

- [`directedgraph.dgcore` Module](#directedgraphdgcore-module)
  - [Table of Contents](#table-of-contents)
  - [`Graph()`](#graph)
    - [`Graph()` Purpose](#graph-purpose)
    - [`Graph()` Attributes](#graph-attributes)
    - [`Graph()` Methods](#graph-methods)
  - [`GraphComponent()`](#graphcomponent)
    - [`GraphComponent()` Purpose](#graphcomponent-purpose)
    - [`GraphComponent()` Dependencies](#graphcomponent-dependencies)
    - [`GraphComponent()` Methods](#graphcomponent-methods)
    - [`GraphComponent()` Pseudocode Implementation](#graphcomponent-pseudocode-implementation)
  - [`Node()`](#node)
  - [`Node()` Purpose](#node-purpose)
  - [`Node()` Methods](#node-methods)
  - [`Arc()`](#arc)
  - [`Arc()` Purpose](#arc-purpose)
  - [`Arc()` Methods](#arc-methods)
  - [`Arc()` Pseudocode Implementation](#arc-pseudocode-implementation)
  - [`directedgraph.dgcore` Module Usage](#directedgraphdgcore-module-usage)


## `Graph()`

### `Graph()` Purpose

A Graph Class instance corresponds to a Directed Graph. We can use Method to manipulate the Directed Graph.

### `Graph()` Attributes

- `name`: name is a string that holds the name of the `Graph()`.
- `components`: components is a dictionary that holds the Components of this diagram. The primary key of the dictionary is the **UID** and the value is the **GraphComponent object**.

### `Graph()` Methods

- `get()`
- `get_name()`
- `update_name(name)`
- `get_component(uid)`
  - Returns the GraphComponent object corresponding to the uid
- `create_component(parameters)` `parameters = {}`
  - Create GraphComponent according to the dictionary in the parameters
- `insert_component(component)`
- `update_component_name(uid, name)`
- `update_component_colour(uid, colour)`
- `update_arc_position(arc1, node1, node2)`
- `delete_component(uid)`
- `verify_graph_integrity()`

## `GraphComponent()`

### `GraphComponent()` Purpose

The class defines all of the components needed for Graph class, itself has a lot of attritubes like name, uid, color and parent graph. Among which, uid is a string of randome characters which can be used to check which component does the uid belong to. The uid was generated by the method `generate_uid()`. When instantiating a new object, you can also get attributes by using method like `get_connected_graph()`, `get_uid()`, `get_name()`, `get_colour()`.

The attributes can also be updated by using method `update()`.

### `GraphComponent()` Dependencies

- `UUID`
- `sys`
- `pathlib.Path`

### `GraphComponent()` Methods

- `generate_uid(self, old_id=None)`
  - parameter: uid_old, data type:string
  - return type: return new uid if old_id is None oterhwise return uid_new
- `get(self, component_attribute=None)`
  - parameter: component_attribute data_type:string
  - return type: dictonary type of component
- `get_connected_graph()`
  - return type:return corresponding graph object
- `get_uid()`
  - return type: return self.uid
- `get_name()`
  - return type: return object's name
- `get_color()`
  - return type: return object's color

### `GraphComponent()` Pseudocode Implementation

instantiate `GraphComponent()`:

``` Python
graphcomponent = GraphComponent()
```

logic for `generate_uid()`:

``` Python
if self.connected_graph is None then 
    self.uid = uuid.uuid4().hex[:12] #automatically generate 12 bits uid
else:
    if uid_old is None:
        check whether uid_old is in the corresponding graph or not in case it is repeated
    if it is not in the corresponding graph then assign old uid to object's uid,otherwise send notification 'There is a duplicate':

    uid_new = uuid.uuid4().hex[:12]
    # check whether new  id is in the corresponding graph
    while uid_new in self.connected_graph.components:
        uid_new = uuid.uuid4().hex[:12]
        self.uid = uid_new
    self.uid = uid_new
```
## `Node()`

## `Node()` Purpose

This class can be used to create Node object it was inherited by the Graphcomponent class.Except all of the attributes inherited from GraphComponent.It also has an extra attribute called position which is the corrindate of a Node which can be stored in the list.

A Node object have `get_position()` method to get the position of the Node.Also the name of a  Node can also be updated by using the method `update()`.

## `Node()` Methods

- `get_position()`
   - return position of a Node, its a list
- `update(self, component_attribute, component_attribute_new)`

   pass a component_attribute and its value,if the passing attribute is 'position',then assign the new position to it.otherwise it will just return inherited `update()` method from Graphclass.
   ``` Python
     if component_attribute == "position":
          self.position[0] = component_attribute_new[0]
          self.position[1] = component_attribute_new[1]
     else:
          return super().update(component_attribute, component_attribute_new)
  ```
## `Arc()`

## `Arc()` Purpose   
   This class will be used to create an Arc object which can be used to connect two Node object.It can store two Node objects by either storing uid or just storing object with the method `update_position()`

## `Arc()` Methods
- `get_position()`

   return two nodes' positions in tuple type
-  `update()`

    store two nodes by either uid or object type
    
## `Arc()` Pseudocode Implementation
- update_position(self, node1=None, node2=None) 

check whether the passing node is a string or an object
``` Python
if node1 is not None:
    if isinstance(node1, str):
        if len(node2) == 12 and self.connected_graph != None:
            self.nodes.append(self.connected_graph.get_component(node1))
    elif isinstance(node1, Node):
          self.nodes.append(node1)

if node2 is not None:
    if isinstance(node2, str) and self.connected_graph != None:
        if len(node2) == 12 and self.connected_graph != None:
            self.nodes.append(self.connected_graph.get_component(node2))
    elif isinstance(node2, Node):
        self.nodes.append(node2)
```
## `directedgraph.dgcore` Module Usage

Use the following code to import the module

``` Python
from directedgraph.dgcore import (
    Graph,
    Node,
    SourceNode,
    GroundNode,
    Arc,
    create_graph,
)
```

#TODO -> FileManager
`create_graph()` takes a Tuple as an argument and creates and returns a `Graph()` instance based on the argument.

Data Convention:

- `Tuple[0]` contains all the parameters needed to create a Graph.
- `Tuple[1]` contains the data for all the GraphComponents.

```python
(
    [{"name": "graph1"}],
    [
        {
            "type": "Node",
            "uid": "7778da0a0a0a",
            "name": "node1",
            "colour": "#FFFFFF",
            "position_x": "100",
            "position_y": "105",
        },
        {
            "type": "SourceNode",
            "uid": "3d8cc5a3ce64",
            "name": "sourcenode3",
            "colour": "#000000",
            "position_x": "500",
            "position_y": "500",
            "user_defined_attribute": "Foo",
        },
        {
            "type": "GroundNode",
            "uid": "365bb94004f2",
            "name": "groundnode",
        },
        {
            "type": "Arc",
            "uid": "b7c567add4ff",
            "name": "arc1",
            "node1": "365bb94004f2",
            "node2": "3d8cc5a3ce64",
        },
    ],
)
```

You can use the `.create_component()` Method to create an Component and insert it into the Graph. This method takes the dictionary as an argument.

Example:

``` Python
graph1 = Graph("graph1")
graph1.create_component({"type": "Node", "name": "Node without UID"})
graph1.create_component({"type": "Node", "name": "Node 1", "uid": "7778da0a0a0a"})
```
